<!DOCTYPE html>
<html>
<head>
    <title>Supertrend Scanner</title>
    <script>
        function loadChart() {
            let symbol = document.getElementById("symbol").value || "RELIANCE.NS";
            document.getElementById("chartFrame").src = "/chart?symbol=" + symbol;
        }

        // Refresh chart every 1 hour (3600000 ms)
        setInterval(loadChart, 3600000);
    </script>
</head>
<body onload="loadChart()">
    <h1>Nifty50 Supertrend Scanner</h1>
    <p><a href="/scan">Run Scan</a></p>

    <form onsubmit="event.preventDefault(); loadChart();">
        <label for="symbol">View Chart:</label>
        <input type="text" id="symbol" name="symbol" value="RELIANCE.NS">
        <button type="submit">Show</button>
    </form>

    <h2>Chart:</h2>
    <iframe id="chartFrame" width="100%" height="600px" frameborder="0"></iframe>
</body>
</html>
